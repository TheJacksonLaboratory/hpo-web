<div class="container">
  <div class="item-header">
      <div class="item-title">{{termTitle}}</div>
      <!--<app-actionbar [actions]="actionBarItems"></app-actionbar> -->
      <button style="float:right" (click)="overlay = true" mat-button><mat-icon class="search-icon">search</mat-icon></button>
      <div *ngIf="overlay" class="search-overlay">
        <button style="float:right" (click)="overlay = false" mat-button><mat-icon class="search-icon">close</mat-icon></button>
        <searchbar></searchbar>
      </div>
  </div>
</div>
<div class="row">
  <div class="container">
    <div class="row">
      <div class="col-lg-3">
        <mat-card class="item-summary">
            <mat-card-content>
              <h3 class="card-title">Term Details</h3>
              <hr class="underline-hr">
              <p>Primary ID:&nbsp; <strong>{{term.id}}</strong></p>
              <p>Alternate ID's:&nbsp;<strong>{{term.altTermIds}}</strong></p>
              <p>PURL: <a href="{{term.purl}}" target="__blank"><strong>{{term.purl}}</strong></a></p>
              <p><u>Definition</u><br><i>{{term.definition}}</i></p>
              <p><u>Synonyms</u><br><i *ngFor="let item of term.synonyms; let isLast=last">{{item}}{{isLast ? '' : ', '}}</i></p>
              <p><u>Xrefs</u><br><i *ngFor="let item of term.xrefs; let isLast=last">{{item}}{{isLast ? '' : ', '}}</i></p>
            </mat-card-content>
        </mat-card>
        <mat-card class="item-summary tree-navigation">
          <mat-card-content>
            <h3 class="card-title">Tree Hierarchy</h3>
            <hr class="underline-hr">
                  <ul class="tree" *ngIf="treeData">
                    <li *ngFor="let parent of treeData.parents">
                      <a class="link"  routerLink="../{{parent.ontologyId}}" >{{parent.name}}</a>
                      <span matTooltip="# of Descendants" matTooltipPosition="above"  *ngIf="parent.childrenCount != 0" class="badge tree-badge">{{parent.childrenCount}}</span>
                    </li>
                    <li>
                      <span class="term"><strong>{{term.name}}</strong></span>
                        <span class="badge tree-badge" matTooltip="# of Descendants" matTooltipPosition="above">{{treeData.termCount}}</span>
                      <ul>
                        <li *ngFor="let child of treeData.children">
                          <a class="link" routerLink="../{{child.ontologyId}}">{{child.name}}</a>
                          <span matTooltip="# of Descendants" matTooltipPosition="above" *ngIf="child.childrenCount != 0" class="badge tree-badge">{{child.childrenCount}}</span>
                        </li>
                      </ul>
                    </li>
                  </ul>
          </mat-card-content>
        </mat-card>
      </div>
      <div class="col-lg-9">
        <div class="tab-content">
          <mat-progress-bar  *ngIf="assocLoading" class="loading-result-details" color="primary" mode="buffer">
          </mat-progress-bar>
          <div [hidden]="assocLoading"class="associations disease-association mat-elevation-z6">
            <h4 class="title">Disease Associations</h4>
            <mat-table #table [dataSource]="diseaseSource" matSort>
              <mat-header-row *matHeaderRowDef="diseaseColumns"></mat-header-row>
              <mat-row *matRowDef="let row; columns: diseaseColumns;"></mat-row>
              <ng-container matColumnDef="diseaseId">
                <mat-header-cell *matHeaderCellDef> Disease Id </mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <a routerLink="/browser/disease/{{row.diseaseId}}">{{row.diseaseId}}</a>
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="diseaseName">
                  <mat-header-cell *matHeaderCellDef>Disease Name </mat-header-cell>
                  <mat-cell *matCellDef="let row">{{row.diseaseName}}</mat-cell>
              </ng-container>
              <ng-container matColumnDef="dbGenes">
                  <mat-header-cell *matHeaderCellDef>Associated Genes</mat-header-cell>
                  <mat-cell *matCellDef="let row">
                    <span *ngFor="let gene of row.dbGenes">
                        <a routerLink="/browser/gene/{{gene.entrezGeneId}}">({{gene.entrezGeneId}})</a> -
                        {{gene.entrezGeneSymbol}}<br>
                    </span>
                  </mat-cell>
              </ng-container>
            </mat-table>
          </div>
          <div [hidden]="assocLoading" class="associations gene-association mat-elevation-z6">
            <h4 class="title">Gene Associations</h4>
            <mat-table #table [dataSource]="geneSource" matSort>
              <mat-header-row *matHeaderRowDef="geneColumns"></mat-header-row>
              <mat-row *matRowDef="let row; columns: geneColumns;"></mat-row>
              <ng-container matColumnDef="entrezGeneId">
                <mat-header-cell *matHeaderCellDef> Gene Symbol </mat-header-cell>
                <mat-cell *matCellDef="let row">
                  {{row.entrezGeneSymbol}}
                  <a routerLink="/browser/gene/{{row.entrezGeneId}}"> ({{row.entrezGeneId}})</a>
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="dbDiseases">
                <mat-header-cell *matHeaderCellDef> Associated Diseases </mat-header-cell>
                <mat-cell *matCellDef="let row">
                  <span *ngFor="let disease of row.dbDiseases">
                      <a routerLink="/browser/disease/{{disease.diseaseId}}">({{disease.diseaseId}})</a> -
                      {{disease.diseaseName}}<br>
                  </span>
                </mat-cell>
              </ng-container>
            </mat-table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
