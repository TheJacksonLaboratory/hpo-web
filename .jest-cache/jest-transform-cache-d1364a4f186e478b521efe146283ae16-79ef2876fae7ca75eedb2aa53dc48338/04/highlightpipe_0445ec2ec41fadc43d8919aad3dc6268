15fdfcb7601dc5420b265a6a1e15f005
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.HighlightPipe = void 0;
const tslib_1 = require("tslib");
const core_1 = require("@angular/core");
/*
  Highlight pipe custom to HPO. Find regex matches and @ and # to beginning and end
  Then. When researching for the next term. Avoid matches with @ and #.

  At the end we want to bold the terms that are contained with @ and #
    replace @ with <strong> & # with </strong>
 */
let HighlightPipe = class HighlightPipe {
    transform(targetString, query) {
        let response = targetString['name'];
        if (response && query) {
            const subHighlight = query.trim().split(' ');
            for (const x in subHighlight) {
                if (subHighlight[x].length > 1) {
                    let replace = '';
                    // (?<!@)" + subHighlight[x] + "(?!\#)" WORKS IN CHROME 62+ but not natively in other browsers
                    // lookahead -> lookbehind not suitable for production yet.
                    // Limited implementation to favor ending strings
                    const regex = new RegExp(subHighlight[x] + '(?!\#)', 'gi');
                    const match = response.match(regex);
                    if (match && match.length > 1) {
                        replace = '@' + match[0] + '#';
                    }
                    else {
                        replace = '@' + match + '#';
                    }
                    response = response.replace(regex, replace);
                }
            }
            response = response.replace(/@/g, '<strong>');
            response = response.replace(/#/g, '</strong>');
            return '<span>' + response + '</span>';
        }
    }
};
exports.HighlightPipe = HighlightPipe;
exports.HighlightPipe = HighlightPipe = tslib_1.__decorate([
    (0, core_1.Pipe)({ name: 'highlight', standalone: true })
], HighlightPipe);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2dhcmdhbS9EZXZlbG9wL2hwby13ZWIvc3JjL2FwcC9zaGFyZWQvcGlwZXMvaGlnaGxpZ2h0LnBpcGUudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLHdDQUFvRDtBQUdwRDs7Ozs7O0dBTUc7QUFFSSxJQUFNLGFBQWEsR0FBbkIsTUFBTSxhQUFhO0lBQ3hCLFNBQVMsQ0FBQyxZQUFpQixFQUFFLEtBQWE7UUFDeEMsSUFBSSxRQUFRLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3BDLElBQUksUUFBUSxJQUFJLEtBQUssRUFBRSxDQUFDO1lBQ3RCLE1BQU0sWUFBWSxHQUFHLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDN0MsS0FBSyxNQUFNLENBQUMsSUFBSSxZQUFZLEVBQUUsQ0FBQztnQkFDN0IsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO29CQUMvQixJQUFJLE9BQU8sR0FBRyxFQUFFLENBQUM7b0JBQ2pCLDhGQUE4RjtvQkFDOUYsMkRBQTJEO29CQUMzRCxpREFBaUQ7b0JBQ2pELE1BQU0sS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7b0JBQzNELE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ3BDLElBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7d0JBQzlCLE9BQU8sR0FBRyxHQUFHLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztvQkFDakMsQ0FBQzt5QkFBTSxDQUFDO3dCQUNOLE9BQU8sR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQztvQkFDOUIsQ0FBQztvQkFDRCxRQUFRLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQzlDLENBQUM7WUFDSCxDQUFDO1lBQ0QsUUFBUSxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQzlDLFFBQVEsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxXQUFXLENBQUMsQ0FBQztZQUMvQyxPQUFPLFFBQVEsR0FBRyxRQUFRLEdBQUcsU0FBUyxDQUFDO1FBQ3pDLENBQUM7SUFDSCxDQUFDO0NBQ0YsQ0FBQTtBQTFCWSxzQ0FBYTt3QkFBYixhQUFhO0lBRHpCLElBQUEsV0FBSSxFQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFLENBQUM7R0FDakMsYUFBYSxDQTBCekIiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2dhcmdhbS9EZXZlbG9wL2hwby13ZWIvc3JjL2FwcC9zaGFyZWQvcGlwZXMvaGlnaGxpZ2h0LnBpcGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGlwZSwgUGlwZVRyYW5zZm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5cbi8qXG4gIEhpZ2hsaWdodCBwaXBlIGN1c3RvbSB0byBIUE8uIEZpbmQgcmVnZXggbWF0Y2hlcyBhbmQgQCBhbmQgIyB0byBiZWdpbm5pbmcgYW5kIGVuZFxuICBUaGVuLiBXaGVuIHJlc2VhcmNoaW5nIGZvciB0aGUgbmV4dCB0ZXJtLiBBdm9pZCBtYXRjaGVzIHdpdGggQCBhbmQgIy5cblxuICBBdCB0aGUgZW5kIHdlIHdhbnQgdG8gYm9sZCB0aGUgdGVybXMgdGhhdCBhcmUgY29udGFpbmVkIHdpdGggQCBhbmQgI1xuICAgIHJlcGxhY2UgQCB3aXRoIDxzdHJvbmc+ICYgIyB3aXRoIDwvc3Ryb25nPlxuICovXG5AUGlwZSh7IG5hbWU6ICdoaWdobGlnaHQnLCBzdGFuZGFsb25lOiB0cnVlIH0pXG5leHBvcnQgY2xhc3MgSGlnaGxpZ2h0UGlwZSBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xuICB0cmFuc2Zvcm0odGFyZ2V0U3RyaW5nOiBhbnksIHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGxldCByZXNwb25zZSA9IHRhcmdldFN0cmluZ1snbmFtZSddO1xuICAgIGlmIChyZXNwb25zZSAmJiBxdWVyeSkge1xuICAgICAgY29uc3Qgc3ViSGlnaGxpZ2h0ID0gcXVlcnkudHJpbSgpLnNwbGl0KCcgJyk7XG4gICAgICBmb3IgKGNvbnN0IHggaW4gc3ViSGlnaGxpZ2h0KSB7XG4gICAgICAgIGlmIChzdWJIaWdobGlnaHRbeF0ubGVuZ3RoID4gMSkge1xuICAgICAgICAgIGxldCByZXBsYWNlID0gJyc7XG4gICAgICAgICAgLy8gKD88IUApXCIgKyBzdWJIaWdobGlnaHRbeF0gKyBcIig/IVxcIylcIiBXT1JLUyBJTiBDSFJPTUUgNjIrIGJ1dCBub3QgbmF0aXZlbHkgaW4gb3RoZXIgYnJvd3NlcnNcbiAgICAgICAgICAvLyBsb29rYWhlYWQgLT4gbG9va2JlaGluZCBub3Qgc3VpdGFibGUgZm9yIHByb2R1Y3Rpb24geWV0LlxuICAgICAgICAgIC8vIExpbWl0ZWQgaW1wbGVtZW50YXRpb24gdG8gZmF2b3IgZW5kaW5nIHN0cmluZ3NcbiAgICAgICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoc3ViSGlnaGxpZ2h0W3hdICsgJyg/IVxcIyknLCAnZ2knKTtcbiAgICAgICAgICBjb25zdCBtYXRjaCA9IHJlc3BvbnNlLm1hdGNoKHJlZ2V4KTtcbiAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgcmVwbGFjZSA9ICdAJyArIG1hdGNoWzBdICsgJyMnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXBsYWNlID0gJ0AnICsgbWF0Y2ggKyAnIyc7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3BvbnNlID0gcmVzcG9uc2UucmVwbGFjZShyZWdleCwgcmVwbGFjZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlc3BvbnNlID0gcmVzcG9uc2UucmVwbGFjZSgvQC9nLCAnPHN0cm9uZz4nKTtcbiAgICAgIHJlc3BvbnNlID0gcmVzcG9uc2UucmVwbGFjZSgvIy9nLCAnPC9zdHJvbmc+Jyk7XG4gICAgICByZXR1cm4gJzxzcGFuPicgKyByZXNwb25zZSArICc8L3NwYW4+JztcbiAgICB9XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==