{"file":"/Users/gargam/Develop/hpo-web/src/app/browser/services/gene/gene.service.ts","mappings":";;;;AAAA,wCAA2C;AAC3C,+CAA2E;AAC3E,sEAAmE;AACnE,8CAAqC;AAI9B,IAAM,WAAW,GAAjB,MAAM,WAAW;IAQtB,YAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;QAPpC,YAAO,GAAG;YACR,OAAO,EAAE,IAAI,kBAAW,CAAC;gBACvB,cAAc,EAAE,kBAAkB;gBAClC,QAAQ,EAAE,8BAA8B;aACzC,CAAC;SACH,CAAC;IAGF,CAAC;IAED,cAAc,CAAC,KAAa;QAC1B,OAAO,IAAI,CAAC,IAAI;aACb,GAAG,CAAC,yBAAW,CAAC,qBAAqB,GAAG,cAAc,GAAG,KAAK,GAAG,eAAe,CAAC,CAAC;IACvF,CAAC;IAED,aAAa,CAAC,KAAa;QACzB,IAAI,MAAM,GAAG,IAAI,iBAAU,EAAE,CAAC;QAC9B,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,gBAAgB,CAAC,CAAC;QACjD,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QACpC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QACvC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QACxC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE,aAAa,CAAC,CAAC;QACjD,OAAO,IAAI,CAAC,IAAI;aACb,IAAI,CAAC,yBAAW,CAAC,uBAAuB,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,CAAC;aACzF,IAAI,CAAC,IAAA,eAAG,EAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IACjE,CAAC;IAED,oDAAoD;IACpD,mEAAmE;IACnE,mFAAmF;IAC3E,mBAAmB,CAAC,KAAe;QACzC,MAAM,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;aACjD,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,UAAU,CAAC,CAAC;QAE1C,OAAO,CAAC,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;IACzD,CAAC;;;;;AApCU,kCAAW;sBAAX,WAAW;IADvB,IAAA,iBAAU,GAAE;6CASe,iBAAU;GARzB,WAAW,CAqCvB","names":[],"sources":["/Users/gargam/Develop/hpo-web/src/app/browser/services/gene/gene.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { environment } from '../../../../environments/environment';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class GeneService {\n  options = {\n    headers: new HttpHeaders({\n      'Content-Type': 'application/json',\n      'Accept': 'q=0.8;application/json;q=0.9'\n    })\n  };\n\n  constructor(private http: HttpClient) {\n  }\n\n  searchGeneInfo(query: string): Observable<any> {\n    return this.http\n      .get(environment.HPO_ENTREZ_SEARCH_URL + '?db=gene&id=' + query + '&retmode=json');\n  }\n\n  searchUniprot(query: string): Observable<any> {\n    let params = new HttpParams();\n    params = params.append('from', 'P_ENTREZGENEID');\n    params = params.append('to', 'ACC');\n    params = params.append('query', query);\n    params = params.append('format', 'tab');\n    params = params.append('columns', 'id,reviewed');\n    return this.http\n      .post(environment.HPO_UNIPROT_MAPPING_URL, null, { params: params, responseType: 'text' })\n      .pipe(map(res => this.parseUniprotMapping(res.split('\\n'))));\n  }\n\n  // Uniprot respopnses are in a tab seperated format.\n  // Particularly a response could have multiple proteins for a gene,\n  // however we only want the review one, if it has one otherwise assume it does not.\n  private parseUniprotMapping(lines: string[]) {\n    const reviewed = lines.map(line => line.split('\\t'))\n      .filter(line => line[1] === 'reviewed');\n\n    return ((reviewed.length > 0) ? reviewed[0][0] : null);\n  }\n}\n"],"version":3}