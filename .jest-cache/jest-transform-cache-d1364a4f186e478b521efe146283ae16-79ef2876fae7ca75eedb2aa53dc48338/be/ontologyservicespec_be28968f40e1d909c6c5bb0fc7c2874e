97a4d25928f602f46bf8e25f49a51bc9
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@angular/common/http/testing");
const testing_2 = require("@angular/core/testing");
const environment_1 = require("../../../../environments/environment");
const ontology_service_1 = require("./ontology.service");
const http_1 = require("@angular/common/http");
describe('OntologyService', () => {
    let service;
    const query = 'HP:00005';
    beforeEach(() => {
        testing_2.TestBed.configureTestingModule({
            imports: [],
            providers: [(0, http_1.provideHttpClient)((0, http_1.withInterceptorsFromDi)()), (0, testing_1.provideHttpClientTesting)()]
        });
        service = testing_2.TestBed.inject(ontology_service_1.OntologyService);
    });
    it('should be created', () => {
        expect(service).toBeTruthy();
    });
    it('should handle the search service method ', (0, testing_2.inject)([
        testing_1.HttpTestingController, ontology_service_1.OntologyService
    ], (httpMock, ontologyService) => {
        ontologyService.search(query, 10).subscribe(termResponse => {
            expect(termResponse).toBeDefined();
            expect(termResponse.terms.length).toBe(3);
            expect(termResponse.terms[0].id).toEqual("HP:0000014");
            expect(termResponse.terms[1].descendantCount).toEqual(24);
        });
        const request = httpMock.expectOne(environment_1.environment.ONTOLOGY_API_HP_SEARCH + '?q=' + query + '&limit=10');
        expect(request.request.method).toEqual('GET');
        request.flush({
            "terms": [
                {
                    "name": "Abnormality of the bladder",
                    "descendantCount": 42,
                    "id": "HP:0000014"
                },
                {
                    "name": "Abnormality of bladder morphology",
                    "descendantCount": 24,
                    "id": "HP:0025487"
                },
                {
                    "name": "Abnormality of the gallbladder",
                    "descendantCount": 17,
                    "id": "HP:0005264"
                }
            ]
        });
        // make sure it actually got processed...
        httpMock.verify();
    }));
    it('should handle parent service method ', (0, testing_2.inject)([
        testing_1.HttpTestingController, ontology_service_1.OntologyService
    ], (httpMock, ontologyService) => {
        ontologyService.parents(query).subscribe(termResponse => {
            expect(termResponse).toBeDefined();
            expect(termResponse[0].id).toEqual("HP:0001238");
            expect(termResponse[1].id).toEqual("HP:0100807");
        });
        const request = httpMock.expectOne(environment_1.environment.ONTOLOGY_API_HP_TERMS + query + '/parents');
        expect(request.request.method).toEqual('GET');
        request.flush([
            {
                "id": "HP:0001238",
                "name": "Slender finger",
                "translations": null,
                "descendantCount": 1
            },
            {
                "id": "HP:0100807",
                "name": "Long fingers",
                "translations": null,
                "descendantCount": 2
            }
        ]);
        httpMock.verify();
    }));
    it('should handle children service method ', (0, testing_2.inject)([
        testing_1.HttpTestingController, ontology_service_1.OntologyService
    ], (httpMock, ontologyService) => {
        ontologyService.children(query).subscribe(termResponse => {
            expect(termResponse).toBeDefined();
            expect(termResponse[0].id).toEqual("HP:0001238");
            expect(termResponse[1].id).toEqual("HP:0100807");
        });
        const request = httpMock.expectOne(environment_1.environment.ONTOLOGY_API_HP_TERMS + query + '/children');
        expect(request.request.method).toEqual('GET');
        request.flush([
            {
                "id": "HP:0001238",
                "name": "Slender finger",
                "translations": null,
                "descendantCount": 1
            },
            {
                "id": "HP:0100807",
                "name": "Long fingers",
                "translations": null,
                "descendantCount": 2
            }
        ]);
        httpMock.verify();
    }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2dhcmdhbS9EZXZlbG9wL2hwby13ZWIvc3JjL2FwcC9icm93c2VyL3NlcnZpY2VzL29udG9sb2d5L29udG9sb2d5LnNlcnZpY2Uuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDBEQUErRjtBQUMvRixtREFBd0Q7QUFDeEQsc0VBQW1FO0FBR25FLHlEQUFxRDtBQUNyRCwrQ0FBaUY7QUFFakYsUUFBUSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtJQUMvQixJQUFJLE9BQXdCLENBQUM7SUFDN0IsTUFBTSxLQUFLLEdBQUcsVUFBVSxDQUFDO0lBQ3pCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxpQkFBTyxDQUFDLHNCQUFzQixDQUFDO1lBQy9CLE9BQU8sRUFBRSxFQUFFO1lBQ1gsU0FBUyxFQUFFLENBQUMsSUFBQSx3QkFBaUIsRUFBQyxJQUFBLDZCQUFzQixHQUFFLENBQUMsRUFBRSxJQUFBLGtDQUF3QixHQUFFLENBQUM7U0FDdkYsQ0FBQyxDQUFDO1FBQ0MsT0FBTyxHQUFHLGlCQUFPLENBQUMsTUFBTSxDQUFDLGtDQUFlLENBQUMsQ0FBQztJQUM1QyxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7UUFDM0IsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQy9CLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLDBDQUEwQyxFQUFFLElBQUEsZ0JBQU0sRUFBQztRQUNwRCwrQkFBcUIsRUFBRSxrQ0FBZTtLQUN2QyxFQUFFLENBQUMsUUFBUSxFQUFFLGVBQWdDLEVBQUUsRUFBRTtRQUVoRCxlQUFlLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFDekQsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ25DLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxD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QUFTLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFDdkQsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ25DLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ2pELE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ25ELENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyx5QkFBVyxDQUFDLHFCQUFxQixHQUFHLEtBQUssR0FBRSxXQUFXLENBQUMsQ0FBQztRQUUzRixNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFOUMsT0FBTyxDQUFDLEtBQUssQ0FDWDtZQUNFO2dCQUNFLElBQUksRUFBRSxZQUFZO2dCQUNsQixNQUFNLEVBQUUsZ0JBQWdCO2dCQUN4QixjQUFjLEVBQUUsSUFBSTtnQkFDcEIsaUJBQWlCLEVBQUUsQ0FBQzthQUNyQjtZQUNEO2dCQUNFLElBQUksRUFBRSxZQUFZO2dCQUNsQixNQUFNLEVBQUUsY0FBYztnQkFDdEIsY0FBYyxFQUFFLElBQUk7Z0JBQ3BCLGlCQUFpQixFQUFFLENBQUM7YUFDckI7U0FDRixDQUNGLENBQUM7UUFFRixRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDcEIsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUlOLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9nYXJnYW0vRGV2ZWxvcC9ocG8td2ViL3NyYy9hcHAvYnJvd3Nlci9zZXJ2aWNlcy9vbnRvbG9neS9vbnRvbG9neS5zZXJ2aWNlLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cFRlc3RpbmdDb250cm9sbGVyLCBwcm92aWRlSHR0cENsaWVudFRlc3RpbmcgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cC90ZXN0aW5nJztcbmltcG9ydCB7IGluamVjdCwgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7XG5pbXBvcnQgeyBlbnZpcm9ubWVudCB9IGZyb20gJy4uLy4uLy4uLy4uL2Vudmlyb25tZW50cy9lbnZpcm9ubWVudCc7XG5pbXBvcnQgeyBTZWFyY2hTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL3NlYXJjaC9zZXJ2aWNlL3NlYXJjaC5zZXJ2aWNlJztcblxuaW1wb3J0IHsgT250b2xvZ3lTZXJ2aWNlIH0gZnJvbSAnLi9vbnRvbG9neS5zZXJ2aWNlJztcbmltcG9ydCB7IHByb3ZpZGVIdHRwQ2xpZW50LCB3aXRoSW50ZXJjZXB0b3JzRnJvbURpIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuXG5kZXNjcmliZSgnT250b2xvZ3lTZXJ2aWNlJywgKCkgPT4ge1xuICBsZXQgc2VydmljZTogT250b2xvZ3lTZXJ2aWNlO1xuICBjb25zdCBxdWVyeSA9ICdIUDowMDAwNSc7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIFRlc3RCZWQuY29uZmlndXJlVGVzdGluZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW10sXG4gICAgcHJvdmlkZXJzOiBbcHJvdmlkZUh0dHBDbGllbnQod2l0aEludGVyY2VwdG9yc0Zyb21EaSgpKSwgcHJvdmlkZUh0dHBDbGllbnRUZXN0aW5nKCldXG59KTtcbiAgICBzZXJ2aWNlID0gVGVzdEJlZC5pbmplY3QoT250b2xvZ3lTZXJ2aWNlKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBiZSBjcmVhdGVkJywgKCkgPT4ge1xuICAgIGV4cGVjdChzZXJ2aWNlKS50b0JlVHJ1dGh5KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGFuZGxlIHRoZSBzZWFyY2ggc2VydmljZSBtZXRob2QgJywgaW5qZWN0KFtcbiAgICBIdHRwVGVzdGluZ0NvbnRyb2xsZXIsIE9udG9sb2d5U2VydmljZVxuICBdLCAoaHR0cE1vY2ssIG9udG9sb2d5U2VydmljZTogT250b2xvZ3lTZXJ2aWNlKSA9PiB7XG5cbiAgICBvbnRvbG9neVNlcnZpY2Uuc2VhcmNoKHF1ZXJ5LCAxMCkuc3Vic2NyaWJlKHRlcm1SZXNwb25zZSA9PiB7XG4gICAgICBleHBlY3QodGVybVJlc3BvbnNlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHRlcm1SZXNwb25zZS50ZXJtcy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICBleHBlY3QodGVybVJlc3BvbnNlLnRlcm1zWzBdLmlkKS50b0VxdWFsKFwiSFA6MDAwMDAxNFwiKTtcbiAgICAgIGV4cGVjdCh0ZXJtUmVzcG9uc2UudGVybXNbMV0uZGVzY2VuZGFudENvdW50KS50b0VxdWFsKDI0KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlcXVlc3QgPSBodHRwTW9jay5leHBlY3RPbmUoZW52aXJvbm1lbnQuT05UT0xPR1lfQVBJX0hQX1NFQVJDSCArICc/cT0nICsgcXVlcnkgKyAnJmxpbWl0PTEwJyk7XG5cbiAgICBleHBlY3QocmVxdWVzdC5yZXF1ZXN0Lm1ldGhvZCkudG9FcXVhbCgnR0VUJyk7XG5cbiAgICByZXF1ZXN0LmZsdXNoKFxuICAgICAge1xuICAgICAgICBcInRlcm1zXCI6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBcIm5hbWVcIjogXCJBYm5vcm1hbGl0eSBvZiB0aGUgYmxhZGRlclwiLFxuICAgICAgICAgICAgXCJkZXNjZW5kYW50Q291bnRcIjogNDIsXG4gICAgICAgICAgICBcImlkXCI6IFwiSFA6MDAwMDAxNFwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBcIm5hbWVcIjogXCJBYm5vcm1hbGl0eSBvZiBibGFkZGVyIG1vcnBob2xvZ3lcIixcbiAgICAgICAgICAgIFwiZGVzY2VuZGFudENvdW50XCI6IDI0LFxuICAgICAgICAgICAgXCJpZFwiOiBcIkhQOjAwMjU0ODdcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgXCJuYW1lXCI6IFwiQWJub3JtYWxpdHkgb2YgdGhlIGdhbGxibGFkZGVyXCIsXG4gICAgICAgICAgICBcImRlc2NlbmRhbnRDb3VudFwiOiAxNyxcbiAgICAgICAgICAgIFwiaWRcIjogXCJIUDowMDA1MjY0XCJcbiAgICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgLy8gbWFrZSBzdXJlIGl0IGFjdHVhbGx5IGdvdCBwcm9jZXNzZWQuLi5cbiAgICBodHRwTW9jay52ZXJpZnkoKTtcbiAgfSkpO1xuXG4gIGl0KCdzaG91bGQgaGFuZGxlIHBhcmVudCBzZXJ2aWNlIG1ldGhvZCAnLCBpbmplY3QoW1xuICAgIEh0dHBUZXN0aW5nQ29udHJvbGxlciwgT250b2xvZ3lTZXJ2aWNlXG4gIF0sIChodHRwTW9jaywgb250b2xvZ3lTZXJ2aWNlOiBPbnRvbG9neVNlcnZpY2UpID0+IHtcblxuICAgIG9udG9sb2d5U2VydmljZS5wYXJlbnRzKHF1ZXJ5KS5zdWJzY3JpYmUodGVybVJlc3BvbnNlID0+IHtcbiAgICAgIGV4cGVjdCh0ZXJtUmVzcG9uc2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QodGVybVJlc3BvbnNlWzBdLmlkKS50b0VxdWFsKFwiSFA6MDAwMTIzOFwiKTtcbiAgICAgIGV4cGVjdCh0ZXJtUmVzcG9uc2VbMV0uaWQpLnRvRXF1YWwoXCJIUDowMTAwODA3XCIpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgcmVxdWVzdCA9IGh0dHBNb2NrLmV4cGVjdE9uZShlbnZpcm9ubWVudC5PTlRPTE9HWV9BUElfSFBfVEVSTVMgKyBxdWVyeSArJy9wYXJlbnRzJyk7XG5cbiAgICBleHBlY3QocmVxdWVzdC5yZXF1ZXN0Lm1ldGhvZCkudG9FcXVhbCgnR0VUJyk7XG5cbiAgICByZXF1ZXN0LmZsdXNoKFxuICAgICAgW1xuICAgICAgICB7XG4gICAgICAgICAgXCJpZFwiOiBcIkhQOjAwMDEyMzhcIixcbiAgICAgICAgICBcIm5hbWVcIjogXCJTbGVuZGVyIGZpbmdlclwiLFxuICAgICAgICAgIFwidHJhbnNsYXRpb25zXCI6IG51bGwsXG4gICAgICAgICAgXCJkZXNjZW5kYW50Q291bnRcIjogMVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgXCJpZFwiOiBcIkhQOjAxMDA4MDdcIixcbiAgICAgICAgICBcIm5hbWVcIjogXCJMb25nIGZpbmdlcnNcIixcbiAgICAgICAgICBcInRyYW5zbGF0aW9uc1wiOiBudWxsLFxuICAgICAgICAgIFwiZGVzY2VuZGFudENvdW50XCI6IDJcbiAgICAgICAgfVxuICAgICAgXVxuICAgICk7XG4gICAgaHR0cE1vY2sudmVyaWZ5KCk7XG4gIH0pKTtcblxuICBpdCgnc2hvdWxkIGhhbmRsZSBjaGlsZHJlbiBzZXJ2aWNlIG1ldGhvZCAnLCBpbmplY3QoW1xuICAgIEh0dHBUZXN0aW5nQ29udHJvbGxlciwgT250b2xvZ3lTZXJ2aWNlXG4gIF0sIChodHRwTW9jaywgb250b2xvZ3lTZXJ2aWNlOiBPbnRvbG9neVNlcnZpY2UpID0+IHtcblxuICAgIG9udG9sb2d5U2VydmljZS5jaGlsZHJlbihxdWVyeSkuc3Vic2NyaWJlKHRlcm1SZXNwb25zZSA9PiB7XG4gICAgICBleHBlY3QodGVybVJlc3BvbnNlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHRlcm1SZXNwb25zZVswXS5pZCkudG9FcXVhbChcIkhQOjAwMDEyMzhcIik7XG4gICAgICBleHBlY3QodGVybVJlc3BvbnNlWzFdLmlkKS50b0VxdWFsKFwiSFA6MDEwMDgwN1wiKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlcXVlc3QgPSBodHRwTW9jay5leHBlY3RPbmUoZW52aXJvbm1lbnQuT05UT0xPR1lfQVBJX0hQX1RFUk1TICsgcXVlcnkgKycvY2hpbGRyZW4nKTtcblxuICAgIGV4cGVjdChyZXF1ZXN0LnJlcXVlc3QubWV0aG9kKS50b0VxdWFsKCdHRVQnKTtcblxuICAgIHJlcXVlc3QuZmx1c2goXG4gICAgICBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImlkXCI6IFwiSFA6MDAwMTIzOFwiLFxuICAgICAgICAgIFwibmFtZVwiOiBcIlNsZW5kZXIgZmluZ2VyXCIsXG4gICAgICAgICAgXCJ0cmFuc2xhdGlvbnNcIjogbnVsbCxcbiAgICAgICAgICBcImRlc2NlbmRhbnRDb3VudFwiOiAxXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBcImlkXCI6IFwiSFA6MDEwMDgwN1wiLFxuICAgICAgICAgIFwibmFtZVwiOiBcIkxvbmcgZmluZ2Vyc1wiLFxuICAgICAgICAgIFwidHJhbnNsYXRpb25zXCI6IG51bGwsXG4gICAgICAgICAgXCJkZXNjZW5kYW50Q291bnRcIjogMlxuICAgICAgICB9XG4gICAgICBdXG4gICAgKTtcblxuICAgIGh0dHBNb2NrLnZlcmlmeSgpO1xuICB9KSk7XG5cblxuXG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==