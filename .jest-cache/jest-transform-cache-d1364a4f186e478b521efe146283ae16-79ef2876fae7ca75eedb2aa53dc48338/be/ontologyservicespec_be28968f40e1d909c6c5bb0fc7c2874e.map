{"file":"/Users/gargam/Develop/hpo-web/src/app/browser/services/ontology/ontology.service.spec.ts","mappings":"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","names":[],"sources":["/Users/gargam/Develop/hpo-web/src/app/browser/services/ontology/ontology.service.spec.ts"],"sourcesContent":["import { HttpTestingController, provideHttpClientTesting } from '@angular/common/http/testing';\nimport { inject, TestBed } from '@angular/core/testing';\nimport { environment } from '../../../../environments/environment';\nimport { SearchService } from '../../../shared/search/service/search.service';\n\nimport { OntologyService } from './ontology.service';\nimport { provideHttpClient, withInterceptorsFromDi } from '@angular/common/http';\n\ndescribe('OntologyService', () => {\n  let service: OntologyService;\n  const query = 'HP:00005';\n  beforeEach(() => {\n    TestBed.configureTestingModule({\n    imports: [],\n    providers: [provideHttpClient(withInterceptorsFromDi()), provideHttpClientTesting()]\n});\n    service = TestBed.inject(OntologyService);\n  });\n\n  it('should be created', () => {\n    expect(service).toBeTruthy();\n  });\n\n  it('should handle the search service method ', inject([\n    HttpTestingController, OntologyService\n  ], (httpMock, ontologyService: OntologyService) => {\n\n    ontologyService.search(query, 10).subscribe(termResponse => {\n      expect(termResponse).toBeDefined();\n      expect(termResponse.terms.length).toBe(3);\n      expect(termResponse.terms[0].id).toEqual(\"HP:0000014\");\n      expect(termResponse.terms[1].descendantCount).toEqual(24);\n    });\n\n    const request = httpMock.expectOne(environment.ONTOLOGY_API_HP_SEARCH + '?q=' + query + '&limit=10');\n\n    expect(request.request.method).toEqual('GET');\n\n    request.flush(\n      {\n        \"terms\": [\n          {\n            \"name\": \"Abnormality of the bladder\",\n            \"descendantCount\": 42,\n            \"id\": \"HP:0000014\"\n          },\n          {\n            \"name\": \"Abnormality of bladder morphology\",\n            \"descendantCount\": 24,\n            \"id\": \"HP:0025487\"\n          },\n          {\n            \"name\": \"Abnormality of the gallbladder\",\n            \"descendantCount\": 17,\n            \"id\": \"HP:0005264\"\n          }]\n      });\n    // make sure it actually got processed...\n    httpMock.verify();\n  }));\n\n  it('should handle parent service method ', inject([\n    HttpTestingController, OntologyService\n  ], (httpMock, ontologyService: OntologyService) => {\n\n    ontologyService.parents(query).subscribe(termResponse => {\n      expect(termResponse).toBeDefined();\n      expect(termResponse[0].id).toEqual(\"HP:0001238\");\n      expect(termResponse[1].id).toEqual(\"HP:0100807\");\n    });\n\n    const request = httpMock.expectOne(environment.ONTOLOGY_API_HP_TERMS + query +'/parents');\n\n    expect(request.request.method).toEqual('GET');\n\n    request.flush(\n      [\n        {\n          \"id\": \"HP:0001238\",\n          \"name\": \"Slender finger\",\n          \"translations\": null,\n          \"descendantCount\": 1\n        },\n        {\n          \"id\": \"HP:0100807\",\n          \"name\": \"Long fingers\",\n          \"translations\": null,\n          \"descendantCount\": 2\n        }\n      ]\n    );\n    httpMock.verify();\n  }));\n\n  it('should handle children service method ', inject([\n    HttpTestingController, OntologyService\n  ], (httpMock, ontologyService: OntologyService) => {\n\n    ontologyService.children(query).subscribe(termResponse => {\n      expect(termResponse).toBeDefined();\n      expect(termResponse[0].id).toEqual(\"HP:0001238\");\n      expect(termResponse[1].id).toEqual(\"HP:0100807\");\n    });\n\n    const request = httpMock.expectOne(environment.ONTOLOGY_API_HP_TERMS + query +'/children');\n\n    expect(request.request.method).toEqual('GET');\n\n    request.flush(\n      [\n        {\n          \"id\": \"HP:0001238\",\n          \"name\": \"Slender finger\",\n          \"translations\": null,\n          \"descendantCount\": 1\n        },\n        {\n          \"id\": \"HP:0100807\",\n          \"name\": \"Long fingers\",\n          \"translations\": null,\n          \"descendantCount\": 2\n        }\n      ]\n    );\n\n    httpMock.verify();\n  }));\n\n\n\n});\n"],"version":3}