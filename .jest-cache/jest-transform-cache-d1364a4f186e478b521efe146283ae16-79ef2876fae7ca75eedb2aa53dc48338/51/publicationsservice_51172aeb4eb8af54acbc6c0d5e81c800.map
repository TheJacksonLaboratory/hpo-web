{"file":"/Users/gargam/Develop/hpo-web/src/app/static/resources/publications/publications.service.ts","mappings":";;;;AAAA,wCAA2C;AAC3C,8EAAuE;AACvE,+CAAkD;AAElD,8CAAqC;AAM9B,IAAM,mBAAmB,GAAzB,MAAM,mBAAmB;IAE9B,YAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;IACpC,CAAC;IAED,eAAe;QACb,OAAO,IAAI,CAAC,IAAI;aACb,GAAG,CAAC,6BAAW,CAAC,wBAAwB,EAAE,EAAE,YAAY,EAAE,MAAM,EAAE,CAAC,CAAC,IAAI,CACvE,IAAA,eAAG,EAAC,QAAQ,CAAC,EAAE;YACb,OAAO,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;QACtD,CAAC,CAAC,CAAC,CAAC;IACV,CAAC;IAED,iBAAiB,CAAC,KAAe;QAC/B,MAAM,YAAY,GAAkB,EAAE,CAAC;QACvC,IAAI,KAAK,EAAE,CAAC;YACV,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE,CAAC;gBACzB,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;gBAChC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,IAAI,KAAK,EAAE,EAAE,CAAC;oBAC9C,IAAI,OAAO,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC;oBAC7B,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC;oBAC1G,MAAM,WAAW,GAAG;wBAClB,SAAS,EAAE,OAAO;wBAClB,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE;wBACvB,SAAS,EAAE,MAAM,CAAC,KAAK,EAAE;wBACzB,MAAM,EAAE,CAAC,MAAM,CAAC,KAAK,EAAE;wBACvB,QAAQ,EAAE,MAAM,CAAC,KAAK,EAAE;wBACxB,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE;wBACvB,MAAM,EAAE,MAAM,CAAC,KAAK,EAAE;wBACtB,SAAS,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,GAAG;wBACjC,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,GAAG;wBAC7B,SAAS,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,GAAG;wBACjC,WAAW,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC;qBACvC,CAAC;oBACF,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBACjC,CAAC;YACH,CAAC;QACH,CAAC;QACD,OAAO,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzF,CAAC;;;;;AAvCU,kDAAmB;8BAAnB,mBAAmB;IAH/B,IAAA,iBAAU,EAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;6CAG0B,iBAAU;GAFzB,mBAAmB,CAwC/B","names":[],"sources":["/Users/gargam/Develop/hpo-web/src/app/static/resources/publications/publications.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { environment } from '../../../../environments/environment.dev';\nimport { HttpClient } from '@angular/common/http';\nimport { Publication } from '../../../browser/models/models';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PublicationsService {\n\n  constructor(private http: HttpClient) {\n  }\n\n  getPublications(): Observable<Publication[]> {\n    return this.http\n      .get(environment.HPO_PUBLICATION_REST_URL, { responseType: 'text' }).pipe(\n        map(response => {\n          return this.buildPublications(response.split('\\n'));\n        }));\n  }\n\n  buildPublications(lines: string[]): Publication[] {\n    const contributors: Publication[] = [];\n    if (lines) {\n      for (const line of lines) {\n        const fields = line.split('\\t');\n        if (!fields[0].startsWith('#') && line !== '') {\n          let authors = fields.shift();\n          authors = authors.split(',').length >= 3 ? authors.split(',').slice(0, 4).join(',') + ' et al.' : authors;\n          const contributor = {\n            'authors': authors,\n            'title': fields.shift(),\n            'journal': fields.shift(),\n            'year': +fields.shift(),\n            'volume': fields.shift(),\n            'pages': fields.shift(),\n            'pmid': fields.shift(),\n            'inhouse': fields.shift() === 'T',\n            'hpo': fields.shift() === 'T',\n            'monarch': fields.shift() === 'T',\n            'topicList': fields.shift().split(';')\n          };\n          contributors.push(contributor);\n        }\n      }\n    }\n    return contributors.sort((a, b) => (a.year > b.year ? -1 : (a.year < b.year ? 1 : 0)));\n  }\n}\n"],"version":3}