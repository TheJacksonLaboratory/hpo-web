{"file":"/Users/gargam/Develop/hpo-web/src/app/browser/services/ontology/ontology.service.ts","mappings":"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","names":[],"sources":["/Users/gargam/Develop/hpo-web/src/app/browser/services/ontology/ontology.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { environment } from '../../../../environments/environment';\nimport { Language, OntologySearchResponse, Term } from '../../models/models';\nimport { LanguageService } from '../language/language.service';\n\n@Injectable({ providedIn: 'root' })\nexport class OntologyService {\n\n  constructor(private httpClient: HttpClient, private languageService: LanguageService) {}\n\n  search(query: string, limit: number): Observable<OntologySearchResponse>{\n    return this.httpClient.get<OntologySearchResponse>(`${environment.ONTOLOGY_API_HP_SEARCH}?q=${query}&limit=${limit}`);\n  }\n\n  term(id: string): Observable<Term>  {\n    return this.httpClient.get<Term>(environment.ONTOLOGY_API_HP_TERMS + id)\n    .pipe(\n      map((data) => {\n      data.translations?.map((language) => {\n        language.language = language.language.toLocaleLowerCase()\n        language.language_long = this.languageService.languageLookup[language.language];\n      });\n      data.translations?.sort((a: Language, b: Language) => a.language_long.localeCompare(b.language_long));\n      return data;\n    }));\n  }\n\n  parents(id: string): Observable<Term[]> {\n    return this.httpClient.get<Term[]>(environment.ONTOLOGY_API_HP_TERMS + id +'/parents').pipe(\n      map((terms) => {\n        return terms.map((t) => {\n          t.translations?.map((language) => {\n            language.language = language.language.toLocaleLowerCase()\n            language.language_long = this.languageService.languageLookup[language.language];\n          });\n          t.translations?.sort((a: Language, b: Language) => a.language_long.localeCompare(b.language_long));\n          return t;\n        });\n      }));\n  }\n\n  children(id: string): Observable<Term[]> {\n    return this.httpClient.get<Term[]>(environment.ONTOLOGY_API_HP_TERMS + id +'/children').pipe(\n      map((terms) => {\n        return terms.map((t) => {\n          t.translations?.map((language) => {\n            language.language = language.language.toLocaleLowerCase()\n            language.language_long = this.languageService.languageLookup[language.language];\n          });\n          t.translations?.sort((a: Language, b: Language) => a.language_long.localeCompare(b.language_long));\n          return t;\n        });\n      }));\n  }\n}\n"],"version":3}