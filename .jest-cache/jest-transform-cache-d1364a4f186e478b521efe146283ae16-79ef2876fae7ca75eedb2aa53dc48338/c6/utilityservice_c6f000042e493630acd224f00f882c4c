c1dbf65ca6ffea473b21e4792e301a17
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.UtilityService = void 0;
const tslib_1 = require("tslib");
const core_1 = require("@angular/core");
const http_1 = require("@angular/common/http");
const environment_1 = require("../../../environments/environment");
const operators_1 = require("rxjs/operators");
let UtilityService = class UtilityService {
    constructor(http) {
        this.http = http;
    }
    openExternalUrl(url) {
        window.open(url, '_blank').focus();
    }
    downloadFile(url) {
        const link = document.createElement('a');
        link.setAttribute('target', '_blank');
        link.setAttribute('href', url);
        document.body.appendChild(link);
        link.click();
        link.remove();
    }
    getMostRecentReleaseHPO() {
        return this.http.get(environment_1.environment.HPO_GITHUB_REPO_URL + '/releases?per_page=1').pipe((0, operators_1.map)((versions) => {
            return versions.find(Boolean);
        }), (0, operators_1.map)((version) => {
            const version_date = version.tag_name.replace('v', '');
            if (version_date == '' || version_date === undefined) {
                return "latest";
            }
            return version_date;
        }), (0, operators_1.publishReplay)(1), (0, operators_1.refCount)());
    }
    getExternalTermIdUrlFromId(termId) {
        if (!termId) {
            return '';
        }
        const sourceParts = termId.split(':');
        if (this.isTermIdExpected(termId, "OMIM")) {
            return `https://omim.org/entry/${sourceParts[1]}`;
        }
        else if (this.isTermIdExpected(termId, "ORPHA")) {
            return `https://www.orpha.net/consor/cgi-bin/OC_Exp.php?Lng=EN&Expert=${sourceParts[1]}`;
        }
        else if (this.isTermIdExpected(termId, "MONDO")) {
            return `https://monarchinitiative.org/disease/${termId}`;
        }
        else if (this.isTermIdExpected(termId, "PMID")) {
            return `https://www.ncbi.nlm.nih.gov/pubmed/${sourceParts[1]}`;
        }
    }
    isTermIdExpected(diseaseId, expected) {
        return diseaseId != "" && diseaseId != null && expected != "" && expected != null
            ? diseaseId.toUpperCase().includes(expected) : false;
    }
    getDiseaseDatabaseName(diseaseId) {
        return diseaseId != "" && diseaseId != null ? diseaseId.split(':')[0] : '';
    }
    static { this.ctorParameters = () => [
        { type: http_1.HttpClient }
    ]; }
};
exports.UtilityService = UtilityService;
exports.UtilityService = UtilityService = tslib_1.__decorate([
    (0, core_1.Injectable)({
        providedIn: 'root'
    }),
    tslib_1.__metadata("design:paramtypes", [http_1.HttpClient])
], UtilityService);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2dhcmdhbS9EZXZlbG9wL2hwby13ZWIvc3JjL2FwcC9zaGFyZWQvdXRpbGl0eS91dGlsaXR5LnNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLHdDQUEyQztBQUMzQywrQ0FBa0Q7QUFDbEQsbUVBQWdFO0FBQ2hFLDhDQUE4RDtBQUt2RCxJQUFNLGNBQWMsR0FBcEIsTUFBTSxjQUFjO0lBRXpCLFlBQW9CLElBQWdCO1FBQWhCLFNBQUksR0FBSixJQUFJLENBQVk7SUFBSSxDQUFDO0lBR3pDLGVBQWUsQ0FBQyxHQUFXO1FBQ3pCLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3JDLENBQUM7SUFFRCxZQUFZLENBQUMsR0FBVztRQUN0QixNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ3RDLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQy9CLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNiLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQixDQUFDO0lBRUQsdUJBQXVCO1FBQ3JCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMseUJBQVcsQ0FBQyxtQkFBbUIsR0FBRyxzQkFBc0IsQ0FBQyxDQUFDLElBQUksQ0FDakYsSUFBQSxlQUFHLEVBQUMsQ0FBQyxRQUFZLEVBQUUsRUFBRTtZQUNuQixPQUFPLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDaEMsQ0FBQyxDQUFDLEVBQ0YsSUFBQSxlQUFHLEVBQUMsQ0FBQyxPQUFZLEVBQUUsRUFBRTtZQUNuQixNQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUMsRUFBRSxDQUFDLENBQUE7WUFDckQsSUFBRyxZQUFZLElBQUksRUFBRSxJQUFJLFlBQVksS0FBSyxTQUFTLEVBQUMsQ0FBQztnQkFDbkQsT0FBTyxRQUFRLENBQUE7WUFDakIsQ0FBQztZQUNELE9BQU8sWUFBWSxDQUFDO1FBQ3RCLENBQUMsQ0FBQyxFQUNGLElBQUEseUJBQWEsRUFBQyxDQUFDLENBQUMsRUFDaEIsSUFBQSxvQkFBUSxHQUFFLENBQ1gsQ0FBQztJQUNKLENBQUM7SUFFRCwwQkFBMEIsQ0FBQyxNQUFlO1FBQ3hDLElBQUcsQ0FBQyxNQUFNLEVBQUMsQ0FBQztZQUNWLE9BQU8sRUFBRSxDQUFDO1FBQ1osQ0FBQztRQUNELE1BQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEMsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUM7WUFDMUMsT0FBTywwQkFBMEIsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDcEQsQ0FBQzthQUFNLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDO1lBQ2xELE9BQU8saUVBQWlFLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFBO1FBQzFGLENBQUM7YUFBTSxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLEVBQUMsQ0FBQztZQUNqRCxPQUFPLHlDQUF5QyxNQUFNLEVBQUUsQ0FBQztRQUMzRCxDQUFDO2FBQU0sSUFBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFDLENBQUM7WUFDL0MsT0FBTyx1Q0FBdUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDakUsQ0FBQztJQUNILENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxTQUFpQixFQUFFLFFBQWdCO1FBQ2xELE9BQU8sU0FBUyxJQUFJLEVBQUUsSUFBSSxTQUFTLElBQUksSUFBSSxJQUFJLFFBQVEsSUFBSSxFQUFFLElBQUksUUFBUSxJQUFJLElBQUk7WUFDL0UsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUN6RCxDQUFDO0lBRUQsc0JBQXNCLENBQUMsU0FBUztRQUM5QixPQUFPLFNBQVMsSUFBSSxFQUFFLElBQUksU0FBUyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQzdFLENBQUM7Ozs7O0FBMURVLHdDQUFjO3lCQUFkLGNBQWM7SUFIMUIsSUFBQSxpQkFBVSxFQUFDO1FBQ1YsVUFBVSxFQUFFLE1BQU07S0FDbkIsQ0FBQzs2Q0FHMEIsaUJBQVU7R0FGekIsY0FBYyxDQTJEMUIiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2dhcmdhbS9EZXZlbG9wL2hwby13ZWIvc3JjL2FwcC9zaGFyZWQvdXRpbGl0eS91dGlsaXR5LnNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gXCJAYW5ndWxhci9jb21tb24vaHR0cFwiO1xuaW1wb3J0IHsgZW52aXJvbm1lbnQgfSBmcm9tIFwiLi4vLi4vLi4vZW52aXJvbm1lbnRzL2Vudmlyb25tZW50XCI7XG5pbXBvcnQgeyBtYXAsIHB1Ymxpc2hSZXBsYXksIHJlZkNvdW50IH0gZnJvbSBcInJ4anMvb3BlcmF0b3JzXCI7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIFV0aWxpdHlTZXJ2aWNlIHtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQpIHsgfVxuXG5cbiAgb3BlbkV4dGVybmFsVXJsKHVybDogc3RyaW5nKSB7XG4gICAgd2luZG93Lm9wZW4odXJsLCAnX2JsYW5rJykuZm9jdXMoKTtcbiAgfVxuXG4gIGRvd25sb2FkRmlsZSh1cmw6IHN0cmluZykge1xuICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgbGluay5zZXRBdHRyaWJ1dGUoJ3RhcmdldCcsICdfYmxhbmsnKTtcbiAgICBsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIHVybCk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICBsaW5rLmNsaWNrKCk7XG4gICAgbGluay5yZW1vdmUoKTtcbiAgfVxuXG4gIGdldE1vc3RSZWNlbnRSZWxlYXNlSFBPKCkge1xuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KGVudmlyb25tZW50LkhQT19HSVRIVUJfUkVQT19VUkwgKyAnL3JlbGVhc2VzP3Blcl9wYWdlPTEnKS5waXBlKFxuICAgICAgbWFwKCh2ZXJzaW9uczogW10pID0+IHtcbiAgICAgICAgcmV0dXJuIHZlcnNpb25zLmZpbmQoQm9vbGVhbik7XG4gICAgICB9KSxcbiAgICAgIG1hcCgodmVyc2lvbjogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IHZlcnNpb25fZGF0ZSA9IHZlcnNpb24udGFnX25hbWUucmVwbGFjZSgndicsJycpXG4gICAgICAgIGlmKHZlcnNpb25fZGF0ZSA9PSAnJyB8fCB2ZXJzaW9uX2RhdGUgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgcmV0dXJuIFwibGF0ZXN0XCJcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmVyc2lvbl9kYXRlO1xuICAgICAgfSksXG4gICAgICBwdWJsaXNoUmVwbGF5KDEpLFxuICAgICAgcmVmQ291bnQoKVxuICAgICk7XG4gIH1cblxuICBnZXRFeHRlcm5hbFRlcm1JZFVybEZyb21JZCh0ZXJtSWQ/OiBzdHJpbmcpIHtcbiAgICBpZighdGVybUlkKXtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgY29uc3Qgc291cmNlUGFydHMgPSB0ZXJtSWQuc3BsaXQoJzonKTtcbiAgICBpZiAodGhpcy5pc1Rlcm1JZEV4cGVjdGVkKHRlcm1JZCwgXCJPTUlNXCIpKSB7XG4gICAgICByZXR1cm4gYGh0dHBzOi8vb21pbS5vcmcvZW50cnkvJHtzb3VyY2VQYXJ0c1sxXX1gO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc1Rlcm1JZEV4cGVjdGVkKHRlcm1JZCwgXCJPUlBIQVwiKSkge1xuICAgICAgcmV0dXJuIGBodHRwczovL3d3dy5vcnBoYS5uZXQvY29uc29yL2NnaS1iaW4vT0NfRXhwLnBocD9Mbmc9RU4mRXhwZXJ0PSR7c291cmNlUGFydHNbMV19YFxuICAgIH0gZWxzZSBpZiAodGhpcy5pc1Rlcm1JZEV4cGVjdGVkKHRlcm1JZCwgXCJNT05ET1wiKSl7XG4gICAgICByZXR1cm4gYGh0dHBzOi8vbW9uYXJjaGluaXRpYXRpdmUub3JnL2Rpc2Vhc2UvJHt0ZXJtSWR9YDtcbiAgICB9IGVsc2UgaWYodGhpcy5pc1Rlcm1JZEV4cGVjdGVkKHRlcm1JZCwgXCJQTUlEXCIpKXtcbiAgICAgIHJldHVybiBgaHR0cHM6Ly93d3cubmNiaS5ubG0ubmloLmdvdi9wdWJtZWQvJHtzb3VyY2VQYXJ0c1sxXX1gO1xuICAgIH1cbiAgfVxuXG4gIGlzVGVybUlkRXhwZWN0ZWQoZGlzZWFzZUlkOiBzdHJpbmcsIGV4cGVjdGVkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gZGlzZWFzZUlkICE9IFwiXCIgJiYgZGlzZWFzZUlkICE9IG51bGwgJiYgZXhwZWN0ZWQgIT0gXCJcIiAmJiBleHBlY3RlZCAhPSBudWxsXG4gICAgICA/IGRpc2Vhc2VJZC50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKGV4cGVjdGVkKSA6IGZhbHNlO1xuICB9XG5cbiAgZ2V0RGlzZWFzZURhdGFiYXNlTmFtZShkaXNlYXNlSWQpe1xuICAgIHJldHVybiBkaXNlYXNlSWQgIT0gXCJcIiAmJiBkaXNlYXNlSWQgIT0gbnVsbCA/IGRpc2Vhc2VJZC5zcGxpdCgnOicpWzBdIDogJyc7XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==