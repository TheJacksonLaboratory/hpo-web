{"file":"/Users/gargam/Develop/hpo-web/src/app/browser/services/gene/gene.service.spec.ts","mappings":";;AAAA,iDAA6C;AAC7C,mDAAwD;AACxD,0DAA+F;AAC/F,sEAAmE;AACnE,+CAAiF;AAEjF,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE;IAE/B,UAAU,CAAC,GAAG,EAAE;QACd,iBAAO,CAAC,sBAAsB,CAAC;YAC/B,OAAO,EAAE,EAAE;YACX,SAAS,EAAE,CAAC,0BAAW,EAAE,IAAA,wBAAiB,EAAC,IAAA,6BAAsB,GAAE,CAAC,EAAE,IAAA,kCAAwB,GAAE,CAAC;SACpG,CAAC,CAAC;IACD,CAAC,CAAC,CAAC;IACH,MAAM,KAAK,GAAG,MAAM,CAAC;IAErB,EAAE,CAAC,gDAAgD,EAAE,IAAA,gBAAM,EAAC;QAC1D,+BAAqB,EAAE,0BAAW;KACnC,EAAE,CAAC,QAAQ,EAAE,WAAwB,EAAE,EAAE;QACxC,iDAAiD;QACjD,iDAAiD;QACjD,wBAAwB;QACxB,WAAW,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE;YACzD,MAAM,CAAC,YAAY,CAAC,CAAC,WAAW,EAAE,CAAC;YACnC,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;YAC5E,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACxD,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;QAEH,oCAAoC;QACpC,MAAM,OAAO,GAAG,QAAQ,CAAC,SAAS,CAAC,yBAAW,CAAC,qBAAqB,GAAG,cAAc,GAAG,KAAK,GAAG,eAAe,CAAC,CAAC;QACjH,qBAAqB;QACrB,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC9C,+CAA+C;QAC/C,oDAAoD;QACpD,yCAAyC;QACzC,OAAO,CAAC,KAAK,CACX;YACE,QAAQ,EAAE;gBACR,MAAM,EACJ;oBACE,KAAK,EAAE,MAAM;oBACb,MAAM,EAAE,MAAM;oBACd,aAAa,EAAE,mBAAmB;oBAClC,QAAQ,EAAE,EAAE;oBACZ,WAAW,EAAE,EAAE;oBACf,YAAY,EAAE,IAAI;oBAClB,eAAe,EAAE,SAAS;oBAC1B,aAAa,EAAE,SAAS;oBACxB,cAAc,EAAE,wBAAwB;oBACxC,oBAAoB,EAAE,MAAM;oBAC5B,kBAAkB,EAAE,mBAAmB;oBACvC,oBAAoB,EAAE,UAAU;iBACjC;aACJ;SACF,CAAC,CAAC;QACL,yCAAyC;QACzC,QAAQ,CAAC,MAAM,EAAE,CAAC;IACpB,CAAC,CAAC,CAAC,CAAC;AACN,CAAC,CAAC,CAAC","names":[],"sources":["/Users/gargam/Develop/hpo-web/src/app/browser/services/gene/gene.service.spec.ts"],"sourcesContent":["import { GeneService } from './gene.service';\nimport { inject, TestBed } from '@angular/core/testing';\nimport { HttpTestingController, provideHttpClientTesting } from '@angular/common/http/testing';\nimport { environment } from '../../../../environments/environment';\nimport { provideHttpClient, withInterceptorsFromDi } from '@angular/common/http';\n\ndescribe('GeneServiceSpec', () => {\n\n  beforeEach(() => {\n    TestBed.configureTestingModule({\n    imports: [],\n    providers: [GeneService, provideHttpClient(withInterceptorsFromDi()), provideHttpClientTesting()]\n});\n  });\n  const query = '7157';\n\n  it('should handle a searchGeneInfo service method ', inject([\n    HttpTestingController, GeneService\n  ], (httpMock, geneService: GeneService) => {\n    // call our service, and once the results come in\n    // expect them to have the proper data (filled in\n    // using the mock below)\n    geneService.searchGeneInfo(query).subscribe(geneResponse => {\n      expect(geneResponse).toBeDefined();\n      expect(geneResponse.result[query].description).toEqual('tumor protein p53');\n      expect(geneResponse.result[query].name).toEqual('TP53');\n      expect(geneResponse.result[query].chromosome).toEqual('17');\n    });\n\n    // look up our request and access it\n    const request = httpMock.expectOne(environment.HPO_ENTREZ_SEARCH_URL + '?db=gene&id=' + query + '&retmode=json');\n    // verify it is a GET\n    expect(request.request.method).toEqual('GET');\n    // Now, provide the answer to the caller above,\n    // flushing the data down the pipe to the caller and\n    // triggering the test's subscribe method\n    request.flush(\n      {\n        'result': {\n          '7157':\n            {\n              'uid': '7157',\n              'name': 'TP53',\n              'description': 'tumor protein p53',\n              'status': '',\n              'currentid': '',\n              'chromosome': '17',\n              'geneticsource': 'genomic',\n              'maplocation': '17p13.1',\n              'otheraliases': 'BCC7, LFS1, P53, TRP53',\n              'nomenclaturesymbol': 'TP53',\n              'nomenclaturename': 'tumor protein p53',\n              'nomenclaturestatus': 'Official',\n            }\n        }\n      });\n    // make sure it actually got processed...\n    httpMock.verify();\n  }));\n});\n"],"version":3}