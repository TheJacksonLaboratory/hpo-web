ecde51ffa1ba60cc404a6f3658c11cc8
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NewsComponent = void 0;
const tslib_1 = require("tslib");
const core_1 = require("@angular/core");
const news_service_1 = require("../../shared/news/news.service");
const router_1 = require("@angular/router");
const layout_1 = require("@angular/cdk/layout");
const sidenav_1 = require("@angular/material/sidenav");
let NewsComponent = class NewsComponent {
    constructor(newsService, route, changeDetectorRef, media) {
        this.newsService = newsService;
        this.route = route;
        this.currentSelected = '';
        this.teaserDate = '';
        this.error = false;
        this.mobileQuery = media.matchMedia('(max-width: 600px)');
        this._mobileQueryListener = () => changeDetectorRef.detectChanges();
        this.mobileQuery.addEventListener('change', this._mobileQueryListener);
    }
    ngOnInit() {
        this.route.params.subscribe((params) => {
            this.teaserDate = params['id'];
        });
        this.newsService.getUniqueDates().subscribe((dates) => {
            if (dates) {
                this.dates = dates;
                this.currentSelected = this.teaserDate && dates.includes(this.teaserDate) ? this.teaserDate : dates[0];
                this.updateNewsItems();
            }
            else {
                this.error = true;
            }
        });
    }
    ngOnDestroy() {
        this.mobileQuery.removeEventListener('change', this._mobileQueryListener);
    }
    setCurrentDate(date) {
        this.sidenav.close();
        this.currentSelected = date;
        this.updateNewsItems();
    }
    updateNewsItems() {
        this.newsService.getNewsByDate(this.currentSelected).subscribe((data) => {
            if (data) {
                this.content = data;
            }
            else {
                this.error = true;
            }
        });
    }
    static { this.ctorParameters = () => [
        { type: news_service_1.NewsService },
        { type: router_1.ActivatedRoute },
        { type: core_1.ChangeDetectorRef },
        { type: layout_1.MediaMatcher }
    ]; }
    static { this.propDecorators = {
        sidenav: [{ type: core_1.ViewChild, args: ['sidenav',] }]
    }; }
};
exports.NewsComponent = NewsComponent;
exports.NewsComponent = NewsComponent = tslib_1.__decorate([
    (0, core_1.Component)({
        selector: 'app-news',
        template: require("./news.component.html")
    }),
    tslib_1.__metadata("design:paramtypes", [news_service_1.NewsService, router_1.ActivatedRoute, core_1.ChangeDetectorRef, layout_1.MediaMatcher])
], NewsComponent);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2dhcmdhbS9EZXZlbG9wL2hwby13ZWIvc3JjL2FwcC9zdGF0aWMvbmV3cy9uZXdzLmNvbXBvbmVudC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsd0NBQTJGO0FBRTNGLGlFQUE2RDtBQUM3RCw0Q0FBaUQ7QUFDakQsZ0RBQW1EO0FBQ25ELHVEQUF1RDtBQU9oRCxJQUFNLGFBQWEsR0FBbkIsTUFBTSxhQUFhO0lBWXhCLFlBQW9CLFdBQXdCLEVBQVUsS0FBcUIsRUFBRSxpQkFBb0MsRUFBRSxLQUFtQjtRQUFsSCxnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUFVLFVBQUssR0FBTCxLQUFLLENBQWdCO1FBUjNFLG9CQUFlLEdBQUcsRUFBRSxDQUFDO1FBQ3JCLGVBQVUsR0FBRyxFQUFFLENBQUM7UUFFaEIsVUFBSyxHQUFHLEtBQUssQ0FBQztRQU1aLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxvQkFBb0IsR0FBRyxHQUFHLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUNwRSxJQUFJLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUN6RSxDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ3JDLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLFdBQVcsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUNwRCxJQUFJLEtBQUssRUFBRSxDQUFDO2dCQUNWLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO2dCQUNuQixJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxVQUFVLElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDdkcsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ3pCLENBQUM7aUJBQU0sQ0FBQztnQkFDTixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztZQUNwQixDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFFTCxDQUFDO0lBRUQsV0FBVztRQUNULElBQUksQ0FBQyxXQUFXLENBQUMsbUJBQW1CLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0lBQzVFLENBQUM7SUFFRCxjQUFjLENBQUMsSUFBSTtRQUNqQixJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO1FBQzVCLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN6QixDQUFDO0lBRUQsZUFBZTtRQUNiLElBQUksQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUN0RSxJQUFJLElBQUksRUFBRSxDQUFDO2dCQUNULElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1lBQ3RCLENBQUM7aUJBQU0sQ0FBQztnQkFDTixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztZQUNwQixDQUFDO1FBRUgsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDOzs7Ozs7OzswQkE1Q0EsZ0JBQVMsU0FBQyxTQUFTOzs7QUFUVCxzQ0FBYTt3QkFBYixhQUFhO0lBTHpCLElBQUEsZ0JBQVMsRUFBQztRQUNULFFBQVEsRUFBRSxVQUFVO1FBQ3BCLDBDQUFvQztLQUVyQyxDQUFDOzZDQWFpQywwQkFBVyxFQUFpQix1QkFBYyxFQUFxQix3QkFBaUIsRUFBUyxxQkFBWTtHQVozSCxhQUFhLENBdUR6QiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvZ2FyZ2FtL0RldmVsb3AvaHBvLXdlYi9zcmMvYXBwL3N0YXRpYy9uZXdzL25ld3MuY29tcG9uZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsIE9uRGVzdHJveSwgT25Jbml0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE5ld3MgfSBmcm9tICcuLi8uLi9icm93c2VyL21vZGVscy9tb2RlbHMnO1xuaW1wb3J0IHsgTmV3c1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zaGFyZWQvbmV3cy9uZXdzLnNlcnZpY2UnO1xuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgTWVkaWFNYXRjaGVyIH0gZnJvbSBcIkBhbmd1bGFyL2Nkay9sYXlvdXRcIjtcbmltcG9ydCB7IE1hdFNpZGVuYXYgfSBmcm9tIFwiQGFuZ3VsYXIvbWF0ZXJpYWwvc2lkZW5hdlwiO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhcHAtbmV3cycsXG4gIHRlbXBsYXRlVXJsOiAnLi9uZXdzLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbmV3cy5jb21wb25lbnQuY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgTmV3c0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcbiAgbW9iaWxlUXVlcnk6IE1lZGlhUXVlcnlMaXN0O1xuICBwcml2YXRlIF9tb2JpbGVRdWVyeUxpc3RlbmVyOiAoKSA9PiB2b2lkO1xuICBkYXRlczogQXJyYXk8c3RyaW5nPjtcbiAgY3VycmVudFNlbGVjdGVkID0gJyc7XG4gIHRlYXNlckRhdGUgPSAnJztcbiAgY29udGVudDogQXJyYXk8TmV3cz47XG4gIGVycm9yID0gZmFsc2U7XG5cbiAgQFZpZXdDaGlsZCgnc2lkZW5hdicpXG4gIHByaXZhdGUgc2lkZW5hdjogTWF0U2lkZW5hdjtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG5ld3NTZXJ2aWNlOiBOZXdzU2VydmljZSwgcHJpdmF0ZSByb3V0ZTogQWN0aXZhdGVkUm91dGUsIGNoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZiwgbWVkaWE6IE1lZGlhTWF0Y2hlcikge1xuICAgIHRoaXMubW9iaWxlUXVlcnkgPSBtZWRpYS5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiA2MDBweCknKTtcbiAgICB0aGlzLl9tb2JpbGVRdWVyeUxpc3RlbmVyID0gKCkgPT4gY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIHRoaXMubW9iaWxlUXVlcnkuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5fbW9iaWxlUXVlcnlMaXN0ZW5lcik7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnJvdXRlLnBhcmFtcy5zdWJzY3JpYmUoKHBhcmFtcykgPT4ge1xuICAgICAgdGhpcy50ZWFzZXJEYXRlID0gcGFyYW1zWydpZCddO1xuICAgIH0pO1xuICAgIHRoaXMubmV3c1NlcnZpY2UuZ2V0VW5pcXVlRGF0ZXMoKS5zdWJzY3JpYmUoKGRhdGVzKSA9PiB7XG4gICAgICBpZiAoZGF0ZXMpIHtcbiAgICAgICAgdGhpcy5kYXRlcyA9IGRhdGVzO1xuICAgICAgICB0aGlzLmN1cnJlbnRTZWxlY3RlZCA9IHRoaXMudGVhc2VyRGF0ZSAmJiBkYXRlcy5pbmNsdWRlcyh0aGlzLnRlYXNlckRhdGUpID8gdGhpcy50ZWFzZXJEYXRlIDogZGF0ZXNbMF07XG4gICAgICAgIHRoaXMudXBkYXRlTmV3c0l0ZW1zKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVycm9yID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5tb2JpbGVRdWVyeS5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLl9tb2JpbGVRdWVyeUxpc3RlbmVyKTtcbiAgfVxuXG4gIHNldEN1cnJlbnREYXRlKGRhdGUpIHtcbiAgICB0aGlzLnNpZGVuYXYuY2xvc2UoKTtcbiAgICB0aGlzLmN1cnJlbnRTZWxlY3RlZCA9IGRhdGU7XG4gICAgdGhpcy51cGRhdGVOZXdzSXRlbXMoKTtcbiAgfVxuXG4gIHVwZGF0ZU5ld3NJdGVtcygpIHtcbiAgICB0aGlzLm5ld3NTZXJ2aWNlLmdldE5ld3NCeURhdGUodGhpcy5jdXJyZW50U2VsZWN0ZWQpLnN1YnNjcmliZSgoZGF0YSkgPT4ge1xuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gZGF0YTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgfSk7XG4gIH1cblxufVxuIl0sInZlcnNpb24iOjN9